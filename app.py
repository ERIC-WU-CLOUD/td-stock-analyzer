4. **成交量确认** (18分)：爆量=18分，放量=12分
        5. **均线趋势** (12分)：多头排列加分，空头排列减分
        6. **市场强度** (8分)：整体市场环境调整
        
        ### 🎛️ 交易策略系统
        
        #### 💰 仓位管理建议
        - **50-70%**: 高信心重仓（信心度≥75%）
        - **40-50%**: 较高信心（信心度60-74%）
        - **30-40%**: 中等信心（信心度45-59%）
        - **20-30%**: 偏低信心（信心度35-44%）
        - **10-20%**: 低信心试探（信心度<35%）
        
        #### ⏱️ 时间框架
        - **短线 (5-15天)**: TD Setup信号
        - **波段 (2-4周)**: TD Setup后期 + 高评分
        - **中线 (1-3个月)**: TD Countdown信号
        
        #### 🎯 入场策略
        - **激进入场**: 当前价立即入场（高分信号）
        - **稳健入场**: 小幅回调1-1.5%后入场
        - **保守入场**: 等待支撑位确认后入场
        
        #### 🛡️ 风险控制
        - **动态止损**: 基于ATR和TDST位计算
        - **技术止损**: 关键支撑位下方
        - **风险收益比**: 目标1:2以上
        
        ## 📈 图表解读指南
        
        ### 🎨 交互式图表元素
        - **K线图**: 红色上涨，绿色下跌
        - **均线**: 紫色MA5，蓝色MA20
        - **TD Setup标记**:
          - 🔵 蓝色圆点 + 数字: 买入Setup (1-9)
          - 🔴 红色三角 + 数字: 卖出Setup (1-9)
        - **TD Countdown标记**:
          - 🟦 蓝色方块 + C数字: 买入Countdown (1-13)
          - 🟥 红色方块 + C数字: 卖出Countdown (1-13)
        - **特殊标记**:
          - ⭐ 金色星号: 完美设置
          - 虚线: TDST动态支撑阻力
          - 点线: 传统技术支撑阻力
        
        ### 📊 图表操作技巧
        - **缩放**: 鼠标滚轮或工具栏缩放按钮
        - **平移**: 拖拽图表进行左右移动
        - **悬停**: 鼠标悬停查看具体数值
        - **图例**: 点击图例隐藏/显示指标线
        - **重置**: 双击图表恢复默认视图
        
        ## 🔧 系统参数设置
        
        ### 📅 日期设置
        - **最新交易日**: 自动获取最近交易日数据
        - **手动选择**: 可选择历史任意交易日
        - **交易日验证**: 自动验证并提供附近交易日
        
        ### 🎯 筛选参数优化建议
        - **股价范围**: 5-15元（平衡风险和成长性）
        - **换手率**: 1.5-5%（确保足够流动性）
        - **市值**: 40-200亿（避免过小风险）
        
        ### 📊 分析参数
        - **图表生成**: 建议开启，提供直观分析
        - **分析数量**: 建议3-10只，平衡效率和深度
        
        ## ⚠️ 重要提示和风险说明
        
        ### 🚨 投资风险提示
        **⚠️ 投资有风险，入市需谨慎！**
        
        1. **系统局限性**:
           - TD分析是技术分析工具，不能预测未来
           - 需要结合基本面分析和市场环境
           - 历史表现不代表未来结果
        
        2. **信号有效性**:
           - 信号只是概率性提示，不是绝对指导
           - 需要验证信号的后续发展
           - 建议设置合理止损位
        
        3. **资金管理**:
           - 不要投入超过承受能力的资金
           - 建议分散投资，控制单股仓位
           - 严格执行止损纪律
        
        ### 📊 数据和技术说明
        
        #### 🔗 数据源
        - **数据提供**: Tushare专业金融数据接口
        - **数据质量**: 交易所官方数据，准确可靠
        - **更新频率**: 实时更新（交易日）
        - **数据范围**: 全市场A股数据
        
        #### 💻 技术架构
        - **前端**: Streamlit Web应用框架
        - **数据处理**: Pandas + NumPy科学计算
        - **图表**: Plotly交互式可视化
        - **缓存**: 智能缓存机制，提升响应速度
        
        #### 🚀 性能优化
        - **批量处理**: 分批获取数据，避免超时
        - **智能缓存**: 缓存计算结果，减少重复计算
        - **异步加载**: 渐进式加载，改善用户体验
        
        ## 🎓 实战应用建议
        
        ### 📈 买入信号识别
        1. **强信号条件**:
           - TD Setup 8-9 + 完美设置
           - TD Countdown 10-13
           - 成交量配合放大
           - 信号等级A级以上
        
        2. **入场时机**:
           - Setup 9完成当日或次日
           - Countdown 13完成确认后
           - 回调至TDST支撑位附近
        
        3. **持有策略**:
           - 设置TDST支撑位止损
           - 分批获利了结
           - 关注对应的卖出信号
        
        ### 📉 卖出信号识别
        1. **强信号条件**:
           - TD Setup -8/-9 + 完美设置
           - TD Countdown -10/-13
           - 高位放量下跌
           - 信号等级A级以上
        
        2. **操作策略**:
           - 持仓减仓或获利了结
           - 设置TDST阻力位反弹止损
           - 避免新开多头仓位
        
        ### 🎯 实战注意事项
        1. **信号确认**:
           - 等待信号完全形成
           - 关注成交量配合
           - 结合市场环境判断
        
        2. **风险管理**:
           - 严格执行止损纪律
           - 控制单次投资比例
           - 保持理性投资心态
        
        3. **长期跟踪**:
           - 建立投资记录
           - 总结成功失败经验
           - 持续优化投资策略
        
        ## 📞 技术支持和更新
        
        ### 🆘 常见问题解决
        
        **Q: 数据获取失败怎么办？**
        A: 
        - 检查网络连接状态
        - 稍后重试，可能是API限制
        - 减少同时分析的股票数量
        
        **Q: 图表不显示怎么办？**
        A:
        - 确保开启了"生成交互式图表"选项
        - 刷新页面重新生成
        - 检查浏览器兼容性
        
        **Q: 分析结果差异大怎么办？**
        A:
        - TD分析具有一定主观性
        - 建议结合多个指标确认
        - 关注市场整体环境变化
        
        **Q: 如何提高分析准确性？**
        A:
        - 关注信号等级A级以上
        - 重视完美设置和成交量配合
        - 结合基本面分析
        - 控制好仓位和止损
        
        ### 🔄 系统更新计划
        - 持续优化算法准确性
        - 增加更多技术指标
        - 改善用户界面体验
        - 扩展数据分析维度
        
        ### 💡 使用技巧总结
        
        1. **高效使用流程**:
           ```
           设置参数 → 筛选股票 → TD分析 → 查看报告 → 制定策略
           ```
        
        2. **关键信号优先级**:
           ```
           Countdown 13 > Setup 9 + 完美设置 > Setup 8-9 > Countdown 10-12
           ```
        
        3. **风险控制原则**:
           ```
           资金管理 > 止损纪律 > 信号确认 > 分散投资
           ```
        
        ---
        
        ### 🎉 感谢使用增强版TD股票分析系统！
        
        本系统集成了专业的TD序列分析理论和现代化的Web技术，
        为投资者提供专业、准确、易用的技术分析工具。
        
        **祝您投资顺利，收益满满！** 📈💰
        
        ---
        
        #### 📄 免责声明
        本系统提供的所有分析结果仅供参考，不构成投资建议。
        用户应当根据自身情况和风险承受能力，独立做出投资决策。
        系统开发者不对任何投资损失承担责任。
        """)

if __name__ == "__main__":
    main()
